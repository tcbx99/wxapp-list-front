"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Page({
    data: {
        array: ['工作', '学习', '家庭'],
        list: {
            group_id: 0,
            group_name: "",
            group_desc: "",
            group_type: 0,
            missions_info: {
                personal_finished_count: 0,
                finished_count: 0,
                all_count: 0
            },
            is_admin: false
        },
        is_create: false
    },
    onLoad: function (options) {
        if (options.mode != 'create') {
            var list = app.getListById(+options.id);
            this.setData({
                list: list
            });
            wx.setNavigationBarTitle({
                title: '修改群组',
            });
        }
        else {
            this.setData({
                is_create: true
            });
        }
    },
    onReady: function () {
    },
    onShow: function () {
    },
    onHide: function () {
    },
    onUnload: function () {
    },
    onPullDownRefresh: function () {
    },
    onReachBottom: function () {
    },
    name: function (e) {
        this.data.list.group_name = e.detail.value;
    },
    text: function (e) {
        this.data.list.group_desc = e.detail.value;
    },
    bindPickerChange: function (e) {
        console.log(e);
        this.setData({
            list: {
                group_type: +e.detail.value
            }
        });
    },
    open: function () {
        var _this = this;
        var that = this;
        if (!this.data.list.group_name) {
            return wx.showModal({
                title: "输入错误",
                content: "群组名称不能为空",
                showCancel: false
            });
        }
        else if (this.data.list.group_name.length > 30) {
            return wx.showModal({
                title: "输入错误",
                content: "群组名称不得多于30字符",
                showCancel: false
            });
        }
        else if (this.data.list.group_desc.length > 300) {
            return wx.showModal({
                title: "输入错误",
                content: "群组介绍不得多于300字符",
                showCancel: false
            });
        }
        var promise;
        if (this.data.is_create) {
            promise = app.globalData.api.createGroup(this.data.list.group_name, this.data.list.group_desc, this.data.list.group_type).then(function (r) { _this.data.list.group_id = r.group_id; return r; });
        }
        else {
            promise = app.globalData.api.updateGroup(this.data.list);
        }
        promise.then(app.putList)
            .then(function () {
            wx.redirectTo({
                url: '/pages/list-modify/success?id=' + that.data.list.group_id + '&type=' + (that.data.is_create ? 'create' : 'modify'),
            });
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1tb2RpZnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsaXN0LW1vZGlmeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUdBLElBQU0sR0FBRyxHQUFHLE1BQU0sRUFBVSxDQUFBO0FBRTVCLElBQUksQ0FBQztJQUtILElBQUksRUFBRTtRQUNKLEtBQUssRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO1FBQ3pCLElBQUksRUFBRTtZQUNKLFFBQVEsRUFBRSxDQUFDO1lBQ1gsVUFBVSxFQUFFLEVBQUU7WUFDZCxVQUFVLEVBQUUsRUFBRTtZQUNkLFVBQVUsRUFBRSxDQUFDO1lBQ2IsYUFBYSxFQUFFO2dCQUNiLHVCQUF1QixFQUFFLENBQUM7Z0JBQzFCLGNBQWMsRUFBRSxDQUFDO2dCQUNqQixTQUFTLEVBQUUsQ0FBQzthQUNiO1lBQ0QsUUFBUSxFQUFFLEtBQUs7U0FDaEI7UUFDRCxTQUFTLEVBQUUsS0FBSztLQUNqQjtJQUtELE1BQU0sRUFBRSxVQUFVLE9BQVk7UUFDNUIsSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLFFBQVEsRUFBRTtZQUU1QixJQUFJLElBQUksR0FBRyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxDQUFBO1lBQ3ZDLElBQUksQ0FBQyxPQUFRLENBQUM7Z0JBQ1osSUFBSSxFQUFFLElBQUk7YUFDWCxDQUFDLENBQUE7WUFDRixFQUFFLENBQUMscUJBQXFCLENBQUM7Z0JBQ3ZCLEtBQUssRUFBRSxNQUFNO2FBQ2QsQ0FBQyxDQUFBO1NBQ0g7YUFBTTtZQUNMLElBQUksQ0FBQyxPQUFRLENBQUM7Z0JBQ1osU0FBUyxFQUFFLElBQUk7YUFDaEIsQ0FBQyxDQUFBO1NBQ0g7SUFDSCxDQUFDO0lBS0QsT0FBTyxFQUFFO0lBRVQsQ0FBQztJQUtELE1BQU0sRUFBRTtJQUVSLENBQUM7SUFLRCxNQUFNLEVBQUU7SUFFUixDQUFDO0lBS0QsUUFBUSxFQUFFO0lBRVYsQ0FBQztJQUtELGlCQUFpQixFQUFFO0lBRW5CLENBQUM7SUFLRCxhQUFhLEVBQUU7SUFFZixDQUFDO0lBRUQsSUFBSSxFQUFFLFVBQVUsQ0FBTTtRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDN0MsQ0FBQztJQUVELElBQUksRUFBRSxVQUFVLENBQU07UUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQzdDLENBQUM7SUFFRCxnQkFBZ0IsRUFBaEIsVUFBaUIsQ0FBSztRQUNwQixPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ2QsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLElBQUksRUFBRTtnQkFDSixVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDNUI7U0FDRixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsSUFBSSxFQUFFO1FBQUEsaUJBMENMO1FBekNDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUVoQixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQzlCLE9BQU8sRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDbEIsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsT0FBTyxFQUFFLFVBQVU7Z0JBQ25CLFVBQVUsRUFBRSxLQUFLO2FBQ2xCLENBQUMsQ0FBQTtTQUNIO2FBQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtZQUNoRCxPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUM7Z0JBQ2xCLEtBQUssRUFBRSxNQUFNO2dCQUNiLE9BQU8sRUFBRSxjQUFjO2dCQUN2QixVQUFVLEVBQUUsS0FBSzthQUNsQixDQUFDLENBQUE7U0FDSDthQUFNLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7WUFDakQsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDO2dCQUNsQixLQUFLLEVBQUUsTUFBTTtnQkFDYixPQUFPLEVBQUUsZUFBZTtnQkFDeEIsVUFBVSxFQUFFLEtBQUs7YUFDbEIsQ0FBQyxDQUFBO1NBQ0g7UUFDRCxJQUFJLE9BQXFCLENBQUM7UUFFMUIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQU92QixPQUFPLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUMsQ0FBQyxJQUFJLEtBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUEsT0FBTyxDQUFDLENBQUEsQ0FBQSxDQUFDLENBQUMsQ0FBQTtTQUN0TDthQUFNO1lBQ0wsT0FBTyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBSSxDQUFDLFdBQVcsQ0FBTSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1NBQy9EO1FBRUQsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDO2FBQ3RCLElBQUksQ0FBQztZQUNKLEVBQUUsQ0FBQyxVQUFVLENBQUM7Z0JBQ1osR0FBRyxFQUFFLGdDQUFnQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7YUFDekgsQ0FBQyxDQUFBO1FBQ0osQ0FBQyxDQUFDLENBQUE7SUFDTixDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvbGlzdC1tb2RpZnkvbGlzdC1tb2RpZnkuanNcbmltcG9ydCB7IElNeUFwcCB9IGZyb20gJy4uLy4uL2FwcCdcblxuY29uc3QgYXBwID0gZ2V0QXBwPElNeUFwcD4oKVxuXG5QYWdlKHtcblxuICAvKipcbiAgICog6aG16Z2i55qE5Yid5aeL5pWw5o2uXG4gICAqL1xuICBkYXRhOiB7XG4gICAgYXJyYXk6IFsn5bel5L2cJywgJ+WtpuS5oCcsICflrrbluq0nXSxcbiAgICBsaXN0OiB7XG4gICAgICBncm91cF9pZDogMCxcbiAgICAgIGdyb3VwX25hbWU6IFwiXCIsXG4gICAgICBncm91cF9kZXNjOiBcIlwiLFxuICAgICAgZ3JvdXBfdHlwZTogMCxcbiAgICAgIG1pc3Npb25zX2luZm86IHtcbiAgICAgICAgcGVyc29uYWxfZmluaXNoZWRfY291bnQ6IDAsXG4gICAgICAgIGZpbmlzaGVkX2NvdW50OiAwLFxuICAgICAgICBhbGxfY291bnQ6IDBcbiAgICAgIH0sXG4gICAgICBpc19hZG1pbjogZmFsc2VcbiAgICB9LFxuICAgIGlzX2NyZWF0ZTogZmFsc2VcbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliqDovb1cbiAgICovXG4gIG9uTG9hZDogZnVuY3Rpb24gKG9wdGlvbnM6IGFueSkge1xuICAgIGlmIChvcHRpb25zLm1vZGUgIT0gJ2NyZWF0ZScpIHtcbiAgICAgIC8vIOiuvue9ruaJgOacieW3suiuvuS/oeaBr1xuICAgICAgdmFyIGxpc3QgPSBhcHAuZ2V0TGlzdEJ5SWQoK29wdGlvbnMuaWQpXG4gICAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgICAgbGlzdDogbGlzdFxuICAgICAgfSlcbiAgICAgIHd4LnNldE5hdmlnYXRpb25CYXJUaXRsZSh7XG4gICAgICAgIHRpdGxlOiAn5L+u5pS5576k57uEJyxcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xuICAgICAgICBpc19jcmVhdGU6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdouWIneasoea4suafk+WujOaIkFxuICAgKi9cbiAgb25SZWFkeTogZnVuY3Rpb24gKCkge1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIOeUn+WRveWRqOacn+WHveaVsC0t55uR5ZCs6aG16Z2i5pi+56S6XG4gICAqL1xuICBvblNob3c6IGZ1bmN0aW9uICgpIHtcblxuICB9LFxuXG4gIC8qKlxuICAgKiDnlJ/lkb3lkajmnJ/lh73mlbAtLeebkeWQrOmhtemdoumakOiXj1xuICAgKi9cbiAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLljbjovb1cbiAgICovXG4gIG9uVW5sb2FkOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i55u45YWz5LqL5Lu25aSE55CG5Ye95pWwLS3nm5HlkKznlKjmiLfkuIvmi4nliqjkvZxcbiAgICovXG4gIG9uUHVsbERvd25SZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICAvKipcbiAgICog6aG16Z2i5LiK5ouJ6Kem5bqV5LqL5Lu255qE5aSE55CG5Ye95pWwXG4gICAqL1xuICBvblJlYWNoQm90dG9tOiBmdW5jdGlvbiAoKSB7XG5cbiAgfSxcblxuICBuYW1lOiBmdW5jdGlvbiAoZTogYW55KSB7XG4gICAgdGhpcy5kYXRhLmxpc3QuZ3JvdXBfbmFtZSA9IGUuZGV0YWlsLnZhbHVlO1xuICB9LFxuXG4gIHRleHQ6IGZ1bmN0aW9uIChlOiBhbnkpIHtcbiAgICB0aGlzLmRhdGEubGlzdC5ncm91cF9kZXNjID0gZS5kZXRhaWwudmFsdWU7XG4gIH0sXG5cbiAgYmluZFBpY2tlckNoYW5nZShlOmFueSl7XG4gICAgY29uc29sZS5sb2coZSlcbiAgICB0aGlzLnNldERhdGEhKHtcbiAgICAgIGxpc3Q6IHtcbiAgICAgICAgZ3JvdXBfdHlwZTogK2UuZGV0YWlsLnZhbHVlXG4gICAgICB9XG4gICAgfSlcbiAgfSxcblxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgIC8vIEZpbHRlclxuICAgIGlmICghdGhpcy5kYXRhLmxpc3QuZ3JvdXBfbmFtZSkge1xuICAgICAgcmV0dXJuIHd4LnNob3dNb2RhbCh7XG4gICAgICAgIHRpdGxlOiBcIui+k+WFpemUmeivr1wiLFxuICAgICAgICBjb250ZW50OiBcIue+pOe7hOWQjeensOS4jeiDveS4uuepulwiLFxuICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5saXN0Lmdyb3VwX25hbWUubGVuZ3RoID4gMzApIHtcbiAgICAgIHJldHVybiB3eC5zaG93TW9kYWwoe1xuICAgICAgICB0aXRsZTogXCLovpPlhaXplJnor69cIixcbiAgICAgICAgY29udGVudDogXCLnvqTnu4TlkI3np7DkuI3lvpflpJrkuo4zMOWtl+esplwiLFxuICAgICAgICBzaG93Q2FuY2VsOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5saXN0Lmdyb3VwX2Rlc2MubGVuZ3RoID4gMzAwKSB7XG4gICAgICByZXR1cm4gd3guc2hvd01vZGFsKHtcbiAgICAgICAgdGl0bGU6IFwi6L6T5YWl6ZSZ6K+vXCIsXG4gICAgICAgIGNvbnRlbnQ6IFwi576k57uE5LuL57uN5LiN5b6X5aSa5LqOMzAw5a2X56ymXCIsXG4gICAgICAgIHNob3dDYW5jZWw6IGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICB2YXIgcHJvbWlzZTogUHJvbWlzZTxhbnk+O1xuICAgIC8vIOWBh+eahOWIm+W7uumAu+i+kVxuICAgIGlmICh0aGlzLmRhdGEuaXNfY3JlYXRlKSB7XG4gICAgICAvKnZhciBsaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcHAuZ2xvYmFsRGF0YS5saXN0c1swXSkpO1xuICAgICAgbGlzdC5uYW1lID0gdGhpcy5kYXRhLmxpc3QuZ3JvdXBfbmFtZVxuICAgICAgbGlzdC50ZXh0ID0gdGhpcy5kYXRhLmxpc3QuZ3JvdXBfZGVzY1xuICAgICAgbGlzdC5pZCA9IGFwcC5nbG9iYWxEYXRhLmxhc3RfbGlzdF9pZCsrXG4gICAgICBsaXN0LmlzX2FkbWluID0gdHJ1ZVxuICAgICAgdGhpcy5zZXREYXRhISh7IGxpc3Q6IGxpc3QgfSk7Ki9cbiAgICAgIHByb21pc2UgPSBhcHAuZ2xvYmFsRGF0YS5hcGkhLmNyZWF0ZUdyb3VwKHRoaXMuZGF0YS5saXN0Lmdyb3VwX25hbWUsIHRoaXMuZGF0YS5saXN0Lmdyb3VwX2Rlc2MsIHRoaXMuZGF0YS5saXN0Lmdyb3VwX3R5cGUpLnRoZW4oKHIpPT57dGhpcy5kYXRhLmxpc3QuZ3JvdXBfaWQgPSByLmdyb3VwX2lkO3JldHVybiByfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvbWlzZSA9IGFwcC5nbG9iYWxEYXRhLmFwaSEudXBkYXRlR3JvdXAoPGFueT50aGlzLmRhdGEubGlzdClcbiAgICB9XG4gICAgLy8g5L+u5pS56YC76L6R5LmL5ZCOXG4gICAgcHJvbWlzZS50aGVuKGFwcC5wdXRMaXN0KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB3eC5yZWRpcmVjdFRvKHtcbiAgICAgICAgICB1cmw6ICcvcGFnZXMvbGlzdC1tb2RpZnkvc3VjY2Vzcz9pZD0nICsgdGhhdC5kYXRhLmxpc3QuZ3JvdXBfaWQgKyAnJnR5cGU9JyArICh0aGF0LmRhdGEuaXNfY3JlYXRlID8gJ2NyZWF0ZScgOiAnbW9kaWZ5JyksXG4gICAgICAgIH0pXG4gICAgICB9KVxuICB9XG59KSJdfQ==